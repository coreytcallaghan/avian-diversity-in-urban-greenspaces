#### Observations by state ####
observations_state <- five_km%>%group_by(STATE_PROV)%>%summarise(count=length(GLOBAL_UNI))
#### Florida
Florida <- five_km%>%filter(STATE_PROV=="Florida")%>%group_by(YEAR)%>%
summarise(observations = length(unique(TARGET_FID)))
#### California
California <- five_km%>%filter(STATE_PROV=="California")%>%group_by(YEAR)%>%
summarise(observations = length(unique(TARGET_FID)))
#### Texas
Texas <- five_km%>%filter(STATE_PROV=="Texas")%>%group_by(YEAR)%>%
summarise(observations = length(unique(TARGET_FID)))
#### Subsetting effort by states ####
#### Florida
Florida <- Sampling%>%filter(STATE == "Florida")
Florida_effort <- Florida%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
write.table(Florida_effort, "C:/Users/CTC/Desktop/EGGO Project/Distribution Paper/Effort Data/Florida_effort.txt", sep="\t")
#### Texas
Texas <- Sampling%>%filter(STATE == "Texas")
Texas_effort <- Texas%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
write.table(Texas_effort, "C:/Users/CTC/Desktop/EGGO Project/Distribution Paper/Effort Data/Texas_effort.txt", sep="\t")
#### California
California <- Sampling%>%filter(STATE == "California")
California_effort <- California%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
write.table(California_effort, "C:/Users/CTC/Desktop/EGGO Project/Distribution Paper/Effort Data/California_effort.txt", sep="\t")
#### Arkansas
Arkansas <- Sampling%>%filter(STATE == "Arkansas")
Arkansas_effort <- Arkansas%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
write.table(Arkansas_effort, "C:/Users/CTC/Desktop/EGGO Project/Distribution Paper/Effort Data/Arkansas_effort.txt", sep="\t")
#### Standardizing Observations by effort ####
#### All observations ####
overall_effort <- read.delim("C:/Users/CTC/Desktop/EGGO Project/Distribution Paper/Effort Data/overall_effort.txt")
all_observations <- merge(observations_per_year_by_grid, overall_effort, by="YEAR")
all_observations <- all_observations%>%mutate(standardized=observations/checklists)
ggplot(all_observations, aes(x=YEAR, y=standardized, group=1))+
geom_point(size=1.5, color="steelblue3")+
geom_line(color="steelblue3")+
ylab('Observations')+
xlab('')+
theme_bw()+
theme(axis.title=element_text(colour="black"))+
theme(axis.text.x=element_text(size=18))+
theme(axis.text.x=element_text(size=18))+
theme(axis.text.y=element_text(size=17))+
theme(axis.title.y=element_text(size=20))+
theme(axis.title.y=element_text(vjust=1))+
theme(panel.border = element_rect(linetype = "solid", colour = "black"))+
theme(panel.grid.minor.x=element_blank(), panel.grid.major.x=element_blank())+
theme(panel.grid.minor.y=element_blank(), panel.grid.major.y=element_line(color="gray70"))
#### Grid Cell Method ####
area_observations <- merge(observations_per_year_by_grid, overall_effort, by="YEAR")
area_observations <- area_observations%>%mutate(standardized=observations/checklists)
area_observations$location <- "North America"
ggplot(area_observations, aes(x=YEAR, y=standardized, group=1))+
geom_point(size=1.5, color="steelblue3")+
geom_line(color="steelblue3")+
ylab('Observations')+
xlab('')+
theme_bw()+
theme(axis.title=element_text(colour="black"))+
theme(axis.text.x=element_text(size=18))+
theme(axis.text.x=element_text(size=18))+
theme(axis.text.y=element_text(size=17))+
theme(axis.title.y=element_text(size=20))+
theme(axis.title.y=element_text(vjust=1))+
theme(panel.border = element_rect(linetype = "solid", colour = "black"))+
theme(panel.grid.minor.x=element_blank(), panel.grid.major.x=element_blank())+
theme(panel.grid.minor.y=element_blank(), panel.grid.major.y=element_line(color="gray70"))
#### Individual States ####
#### Florida
Florida_effort <- read.delim("C:/Users/CTC/Desktop/EGGO Project/Distribution Paper/Effort Data/Florida_effort.txt")
Florida_observations <- merge(Florida, Florida_effort, by="YEAR")
Florida_observations <- Florida_observations%>%mutate(standardized=observations/checklists)
Florida_observations$location <- "Florida"
#### Texas
Texas_effort <- read.delim("C:/Users/CTC/Desktop/EGGO Project/Distribution Paper/Effort Data/Texas_effort.txt")
Texas_observations <- merge(Texas, Texas_effort, by="YEAR")
Texas_observations <- Texas_observations%>%mutate(standardized=observations/checklists)
Texas_observations$location <- "Texas"
#### California
California_effort <- read.delim("C:/Users/CTC/Desktop/EGGO Project/Distribution Paper/Effort Data/California_effort.txt")
California_observations <- merge(California, California_effort, by="YEAR")
California_observations <- California_observations%>%mutate(standardized=observations/checklists)
California_observations$location <- "California"
#### FINAL FIGURE CREATION ####
#### Grid Cell Method ####
Grid_Cell <- rbind(California_observations, Texas_observations, Florida_observations, area_observations)
Grid_Cell <- Grid_Cell%>%filter(YEAR>=2006)
ggplot(Grid_Cell, aes(x=YEAR, y=standardized, linetype=location))+
geom_line()+
geom_point(size=2.5, pch=19)+
ylab('Standardized area of occupancy')+
xlab('')+
theme_bw()+
theme(axis.title=element_text(colour="black"))+
theme(axis.text.x=element_text(size=10))+
theme(axis.text.y=element_text(size=10))+
theme(axis.title.y=element_text(size=20))+
theme(axis.title.y=element_text(vjust=1))+
theme(panel.border = element_rect(linetype = "solid", colour = "black"))+
theme(panel.grid.minor.x=element_blank(), panel.grid.major.x=element_blank())+
theme(panel.grid.minor.y=element_blank(), panel.grid.major.y=element_line(color="gray70"))+
facet_wrap(~location, scales="free")+
guides(linetype=FALSE, shape=FALSE)
theme(legend.title=element_text(size=16))+
theme(legend.text=element_text(size=14))+
theme(legend.background=element_rect(fill="light gray", linetype=6))+
guides(linetype=guide_legend(keywidth=5, keyheight=1, title.hjust =0.5, title="Location"))+
guides(shape=guide_legend(title="Location"))
theme(legend.justification=c(0,1), legend.position=c(0,1))+
#############################################################################################
#############################################################################################
# Steps used to calculate separate files read in above that have effort information in them #
#############################################################################################
#############################################################################################
#### Calculating Effort Information ####
#### Reading in sampling file
Sampling <- read_delim("C:/Users/CTC/Desktop/EGGO Project/Distribution Paper/Effort Data/ebd_sampling_relAug-2016/ebd_sampling_relAug-2016.txt",
delim='\t', quote="", col_names=TRUE, trim_ws=TRUE)
#### Renaming column headings
names(Sampling) <- sub(" ", ".", names(Sampling))
names(Sampling) <- sub(" ", ".", names(Sampling))
#### selecting for US only checklists (lower 48)
Sampling <- Sampling%>%filter(COUNTRY.CODE=="US")
Sampling <- Sampling%>%filter(STATE != "Alaska")
Sampling <- Sampling %>%filter(STATE != "Hawaii")
#### Subsetting dataframe for time that matches EGGO Observations
DATE1 <- as.Date("1972-01-22")
DATE2 <- as.Date("2016-05-31")
Sampling <- Sampling%>%filter(OBSERVATION.DATE>DATE1 & OBSERVATION.DATE<DATE2)
Sampling$YEAR <- year(Sampling$OBSERVATION.DATE)
#### Summarising data to find effort information
overall_effort <- Sampling%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
lorida <- Sampling%>%filter(STATE == "Florida")
overall_effort <- Sampling%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
Sampling <- read_delim("H:/Projects/Current Projects/EGGO_Distribution_Paper/Effort Data/ebd_sampling_relFeb-2017/ebd_sampling_relFeb-2017.txt",
delim='\t', quote="", col_names=TRUE, trim_ws=TRUE)
names(Sampling) <- sub(" ", ".", names(Sampling))
names(Sampling) <- sub(" ", ".", names(Sampling))
Sampling <- Sampling%>%filter(COUNTRY.CODE=="US")
Sampling <- Sampling%>%filter(STATE != "Alaska")
Sampling <- Sampling %>%filter(STATE != "Hawaii")
DATE1 <- as.Date("2006-01-01")
DATE2 <- as.Date("2016-12-31")
Sampling <- Sampling%>%filter(OBSERVATION.DATE>DATE1 & OBSERVATION.DATE<DATE2)
Sampling$YEAR <- year(Sampling$OBSERVATION.DATE)
overall_effort <- Sampling%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
Florida <- Sampling%>%filter(STATE == "Florida")
Florida_effort <- Florida%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
Texas <- Sampling%>%filter(STATE == "Texas")
Texas_effort <- Texas%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
#### California
California <- Sampling%>%filter(STATE == "California")
California_effort <- California%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
area_observations <- merge(observations_per_year_by_grid, overall_effort, by="YEAR")
area_observations <- area_observations%>%mutate(standardized=observations/checklists)
area_observations$location <- "North America"
Florida_observations <- merge(Florida, Florida_effort, by="YEAR")
Florida_observations <- Florida_observations%>%mutate(standardized=observations/checklists)
View(Florida_observations)
View(Florida)
View(Florida_effort)
Sampling_state <- Sampling %>%
group_by(STATE) %>%
summarise(total_checklists=length(unique(SAMPLING.EVENT.IDENTIFIER)))
observations_state_year <- ten_km %>%
group_by(YEAR, STATE_PROV) %>%
tally() %>%
group_by(STATE_PROV) %>%
mutate(Years = list(YEAR)) %>%
select(Years, STATE_PROV) %>%
distinct(.keep_all=TRUE) %>%
rename(STATE=STATE_PROV)
observations_by_state <- ten_km %>%
group_by(STATE_PROV) %>%
summarise(obs=length(unique(GLOBAL_UNI))) %>%
arrange(desc(obs)) %>%
rename(STATE=STATE_PROV) %>%
inner_join(., Sampling_state, by='STATE') %>%
mutate(percentage_of_checklists=(obs/total_checklists)*100) %>%
inner_join(., observations_state_year, by='STATE')
View(observations_by_state)
View(area_observations)
View(all_observations)
#### Florida
Florida <- ten_km%>%filter(STATE_PROV=="Florida")%>%group_by(YEAR)%>%
summarise(observations = length(unique(TARGET_FID)))
#### California
California <- ten_km%>%filter(STATE_PROV=="California")%>%group_by(YEAR)%>%
summarise(observations = length(unique(TARGET_FID)))
#### Texas
Texas <- ten_km%>%filter(STATE_PROV=="Texas")%>%group_by(YEAR)%>%
summarise(observations = length(unique(TARGET_FID)))
#### Florida
Florida_effort <- Sampling%>%filter(STATE == "Florida")
Florida_effort <- Florida_effort%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
#### Texas
Texas_effort <- Sampling%>%filter(STATE == "Texas")
Texas_effort <- Texas_effort%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
#### California
California_effort <- Sampling%>%filter(STATE == "California")
California_effort <- California_effort%>%group_by(YEAR)%>%
summarise(checklists=length(SAMPLING.EVENT.IDENTIFIER), duration=sum(DURATION.MINUTES, na.rm=TRUE))
#### Grid Cell Method ####
area_observations <- merge(observations_per_year_by_grid, overall_effort, by="YEAR")
area_observations <- area_observations%>%mutate(standardized=observations/checklists)
area_observations$location <- "North America"
#### Individual States ####
#### Florida
Florida_observations <- merge(Florida, Florida_effort, by="YEAR")
Florida_observations <- Florida_observations%>%mutate(standardized=observations/checklists)
Florida_observations$location <- "Florida"
#### Texas
Texas_observations <- merge(Texas, Texas_effort, by="YEAR")
Texas_observations <- Texas_observations%>%mutate(standardized=observations/checklists)
Texas_observations$location <- "Texas"
#### California
California_observations <- merge(California, California_effort, by="YEAR")
California_observations <- California_observations%>%mutate(standardized=observations/checklists)
California_observations$location <- "California"
Grid_Cell <- rbind(California_observations, Texas_observations, Florida_observations, area_observations)
ggplot(Grid_Cell, aes(x=YEAR, y=standardized))+
geom_line()+
geom_point(size=2.5, pch=19)+
ylab('Standardized Area of Occupancy')+
xlab('')+
theme_bw()+
theme(axis.title=element_text(colour="black"))+
theme(axis.text.x=element_text(size=10))+
theme(axis.text.y=element_text(size=10))+
theme(axis.title.y=element_text(size=20))+
theme(axis.title.y=element_text(vjust=1))+
theme(panel.border = element_rect(linetype = "solid", colour = "black"))+
theme(panel.grid.minor.x=element_blank(), panel.grid.major.x=element_blank())+
theme(panel.grid.minor.y=element_blank(), panel.grid.major.y=element_line(color="gray70"))+
facet_wrap(~location, scales="free")+
guides(linetype=FALSE, shape=FALSE)
?ggsave
ggsave("H:/Projects/Current Projects/EGGO_Distribution_Paper/Southwestern Naturalist Attempt/Revision Number 3/Figure 1.jpeg",
width=200, height=175, units="mm", dpi=600)
ggsave("H:/Projects/Current Projects/EGGO_Distribution_Paper/Southwestern Naturalist Attempt/Revision Number 3/Figure 1.jpeg",
width=150, height=100, units="mm", dpi=600)
ggsave("H:/Projects/Current Projects/EGGO_Distribution_Paper/Southwestern Naturalist Attempt/Revision Number 3/Figure 1.jpeg",
width=200, height=175, units="mm", dpi=600)
EGGO_EBIRD_Locations <- read.csv("H:/Projects/Current Projects/EGGO_Distribution_Paper/Raw Data/EGGO_EBIRD_Locations_take2.csv")
View(EGGO_EBIRD_Locations)
View(ten_km)
EGGO_EBIRD_Locations$OBSERVATION.DATE <- as.Date(EGGO_EBIRD_Locations$OBSERVATION.DATE, format="%m/%d/%Y")
EGGO <- EGGO_EBIRD_Locations%>%filter(OBSERVATION.DATE>= "2016-01-01" & OBSERVATION.DATE<= "2016-12-31")
View(EGGO)
table(EGGO$APPROVED)
2117/2221
sum(observations_by_state$obs)
table(ten_km$APPROVED)
16147/17447
7323/17447
6058/17447
3573/17447
library(dplyr)
library(dismo)
library(maps)
library(ggmap)
library(ggplot2)
library(sp)
library(broom)
locations <- EGGO[c(18,17)] ## getting coordinates
states <- map_data('state')
ggplot()+
geom_polygon(data=states, aes(x=long, y=lat, group=group),  fill=NA, color="black")+
geom_point(data=locations, aes(x=LONGITUDE, y=LATITUDE), shape=18, color='black', size=2)+
geom_jitter(data=locations, aes(x=LONGITUDE, y=LATITUDE), alpha=0.01, size=12, color="gray55")+
theme_bw()+
xlab('')+
ylab('')+
theme(axis.title.x = element_text(size=16),
axis.title.y = element_text(size=16, angle=90),
axis.text.x = element_text(size=14, color='black'),
axis.text.y = element_text(size=14, color='black'),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())+
coord_equal()
ggsave("H:/Projects/Current Projects/EGGO_Distribution_Paper/Southwestern Naturalist Attempt/Revision Number 3/Figure 2.jpeg",
width=200, height=150, units="mm", dpi=600)
load("H:/Dissertation/Dissertation Chapters/Additional Chapters/Minimum data requirements for eBird use in urban greenspaces/Analysis/Data/Bird_Data/target_hotspots.RData")
View(full_data)
test <- full_data %>% filter(COUNTRY != "United States") %>% filter(COUNTRY != "Canada") %>% group_by()
library(dplyr)
test <- full_data %>% filter(COUNTRY != "United States") %>% filter(COUNTRY != "Canada")
test2 <- test %>%group_by(`LOCALITY ID`) %>% summarise(lists=length(unique(`SAMPLING EVENT IDENTIFIER`)))
View(test2)
test3 <- test2 %>% filter(lists>=100)
write.csv(test3, "H:/Dissertation/Dissertation Chapters/Additional Chapters/Minimum data requirements for eBird use in urban greenspaces/Revision_analysis_min_checklists/international.csv", row.names=FALSE)
test <- data.frame(Region=c("West", "East", "West", "East", "West", "East"),
Threat=c("yes", "no", "yes", "yes", "yes", "yes"),
Threat.num=c(1,0,1,1,1,1))
View(test)
?glm
?anova
mod.1 <- glm(Threat~Region, data=test, family="binary")
summary(mod.1)
anova(mod.1, type="chi-square")
mod.1 <- glm(Threat~Region, data=test, family="binary")
mod.1 <- glm(Threat~Region, data=test, family=binary)
mod.1 <- glm(Threat~Region, data=test, family=binary)
mod.1 <- glm(Threat~Region, data=test, family="binomial")
summary(mod.1)
anova(mod.1, type="chi-square")
install.packages('SptialTools')
install.packages('SpatialTools')
### Packages
library(dplyr)
library(RSQLite)
library(tictoc)
library(readr)
library(lubridate)
### connect to eBird db
ebird_db <- src_sqlite("D:/All eBird Data/ebird.sqlite", create=FALSE)
all_ebird <- tbl(ebird_db, "ebird")
bird_data <- all_ebird %>%
select(OBSERVATION_DATE, OBSERVER_ID, LOCALITY_ID, SAMPLING_EVENT_IDENTIFIER, COMMON_NAME,
ALL_SPECIES_REPORTED, DURATION_MINUTES, EFFORT_DISTANCE_KM, LATITUDE, LONGITUDE, CATEGORY,
STATE, COUNTRY, COUNTY, NUMBER_OBSERVERS, GROUP_IDENTIFIER, PROTOCOL_TYPE,
LOCALITY, OBSERVATION_COUNT, EFFORT_AREA_HA, LATITUDE, LONGITUDE) %>%
filter(COUNTRY == "Australia") %>%
filter(STATE == "Queensland")
bird_data <- all_ebird %>%
select(OBSERVATION_DATE, OBSERVER_ID, LOCALITY_ID, SAMPLING_EVENT_IDENTIFIER, COMMON_NAME,
ALL_SPECIES_REPORTED, DURATION_MINUTES, EFFORT_DISTANCE_KM, LATITUDE, LONGITUDE, CATEGORY,
STATE, COUNTRY, COUNTY, NUMBER_OBSERVERS, GROUP_IDENTIFIER, PROTOCOL_TYPE,
LOCALITY, OBSERVATION_COUNT, EFFORT_AREA_HA, LATITUDE, LONGITUDE) %>%
filter(COUNTRY == "Australia") %>%
filter(STATE == "Queensland")
collect(n=Inf)
bird_data <- all_ebird %>%
select(OBSERVATION_DATE, OBSERVER_ID, LOCALITY_ID, SAMPLING_EVENT_IDENTIFIER, COMMON_NAME,
ALL_SPECIES_REPORTED, DURATION_MINUTES, EFFORT_DISTANCE_KM, LATITUDE, LONGITUDE, CATEGORY,
STATE, COUNTRY, COUNTY, NUMBER_OBSERVERS, GROUP_IDENTIFIER, PROTOCOL_TYPE,
LOCALITY, OBSERVATION_COUNT, EFFORT_AREA_HA, LATITUDE, LONGITUDE) %>%
filter(COUNTRY == "Australia") %>%
filter(STATE == "Queensland") %>%
collect(n=Inf)
bird_data.2 <- bird_data %>%
distinct(SAMPLING_EVENT_IDENTIFIER, keep.all=TRUE)
bird_data.2 <- bird_data %>%
distinct(SAMPLING_EVENT_IDENTIFIER, keep_all=TRUE)
?distinct
bird_data.2 <- bird_data %>%
distinct(SAMPLING_EVENT_IDENTIFIER, .keep_all=TRUE)
View(bird_data.2)
write.csv(bird_data.2, "C:/Users/CTC/Desktop/Queensland.csv", row.names=FALSE)
library(readr)
SEQ_checklists <- read_csv("C:/Users/CTC/Desktop/SEQ_checklists.csv")
View(SEQ_checklists)
subsample_lists <- SEQ_checklists$SAMPLING_EVENT_IDENTIFIER
rm(bird_data)
rm(bird_data.2)
SEQ_data <- all_ebird %>%
select(OBSERVATION_DATE, OBSERVER_ID, LOCALITY_ID, SAMPLING_EVENT_IDENTIFIER, COMMON_NAME,
ALL_SPECIES_REPORTED, DURATION_MINUTES, EFFORT_DISTANCE_KM, LATITUDE, LONGITUDE, CATEGORY,
STATE, COUNTRY, COUNTY, NUMBER_OBSERVERS, GROUP_IDENTIFIER, PROTOCOL_TYPE,
LOCALITY, OBSERVATION_COUNT, EFFORT_AREA_HA, LATITUDE, LONGITUDE) %>%
filter(SAMPLING_EVENT_IDENTIFIER %in% subsample_lists) %>%
collenct(n=Inf)
SEQ_data <- all_ebird %>%
select(OBSERVATION_DATE, OBSERVER_ID, LOCALITY_ID, SAMPLING_EVENT_IDENTIFIER, COMMON_NAME,
ALL_SPECIES_REPORTED, DURATION_MINUTES, EFFORT_DISTANCE_KM, LATITUDE, LONGITUDE, CATEGORY,
STATE, COUNTRY, COUNTY, NUMBER_OBSERVERS, GROUP_IDENTIFIER, PROTOCOL_TYPE,
LOCALITY, OBSERVATION_COUNT, EFFORT_AREA_HA, LATITUDE, LONGITUDE) %>%
filter(SAMPLING_EVENT_IDENTIFIER %in% subsample_lists) %>%
collect(n=Inf)
ICC_checklists <- read_csv("C:/Users/CTC/Desktop/ICC_checklists.csv")
subsample_lists.ICC <- ICC_checklists$SAMPLING_EVENT_IDENTIFIER
ICC_data <- all_ebird %>%
select(OBSERVATION_DATE, OBSERVER_ID, LOCALITY_ID, SAMPLING_EVENT_IDENTIFIER, COMMON_NAME,
ALL_SPECIES_REPORTED, DURATION_MINUTES, EFFORT_DISTANCE_KM, LATITUDE, LONGITUDE, CATEGORY,
STATE, COUNTRY, COUNTY, NUMBER_OBSERVERS, GROUP_IDENTIFIER, PROTOCOL_TYPE,
LOCALITY, OBSERVATION_COUNT, EFFORT_AREA_HA, LATITUDE, LONGITUDE) %>%
filter(SAMPLING_EVENT_IDENTIFIER %in% subsample_lists.ICC) %>%
collect(n=Inf)
View(ICC_checklists)
View(ICC_data)
ICC <- ICC_data %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME)) %>%
arrange(desc)
?arrange
?desc
ICC <- ICC_data %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME)) %>%
desc(total_obs)
ICC <- ICC_data %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME))
View(ICC)
ICC <- ICC_data %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME)) %>%
arrange(desc(total_obs))
View(ICC)
ICC <- ICC_data %>%
group_by(COMMON_NAME) %>%
filter(CATEGORY %in% c("species", "issf"))
ICC <- ICC_data %>%
filter(CATEGORY %in% c("species", "issf")) %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME)) %>%
arrange(desc(total_obs))
ICC <- ICC_data %>%
filter(CATEGORY %in% c("species", "issf")) %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME)) %>%
mutate(relative_abundance = total_obs/2480) %>%
arrange(desc(total_obs))
ICC <- ICC_data %>%
filter(CATEGORY %in% c("species", "issf")) %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME)) %>%
mutate(relative_abundance = total_obs/2480) %>%
arrange(desc(relative_abundance))
View(ICC)
write.csv(ICC, "C:/Users/CTC/Desktop/ICC_birds.csv", row.names=FALSE)
SEQ <- SEQ_data %>%
filter(CATEGORY %in% c("species", "issf")) %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME)) %>%
mutate(relative_abundance = total_obs/2480) %>%
arrange(desc(relative_abundance))
write.csv(SEQ, "C:/Users/CTC/Desktop/ICC_birds.csv", row.names=FALSE)
write.csv(ICC, "C:/Users/CTC/Desktop/ICC_birds.csv", row.names=FALSE)
write.csv(SEQ, "C:/Users/CTC/Desktop/SEQ_birds.csv", row.names=FALSE)
ICC <- ICC_data %>%
filter(CATEGORY %in% c("species", "issf")) %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME)) %>%
mutate(relative_abundance = (total_obs/2480)*100) %>%
arrange(desc(relative_abundance))
write.csv(ICC, "C:/Users/CTC/Desktop/ICC_birds.csv", row.names=FALSE)
SEQ <- SEQ_data %>%
filter(CATEGORY %in% c("species", "issf")) %>%
group_by(COMMON_NAME) %>%
summarise(total_obs=length(COMMON_NAME)) %>%
mutate(relative_abundance = (total_obs/66799)*100) %>%
arrange(desc(relative_abundance))
write.csv(SEQ, "C:/Users/CTC/Desktop/SEQ_birds.csv", row.names=FALSE)
setwd("H:/Dissertation/Dissertation Chapters/Data Chapters/Relationship between avian diversity and urban environments/Analysis/avian diversity in greenspaces")
## Necessary packages
library(readr)
library(dplyr)
library(ggplot2)
library(tidyr)
library(vegan)
library(data.table)
library(lubridate)
### Reading in study sites
Final_study_sites <- read_csv("Data/Final_study_sites/Final_study_sites.csv")
Final_study_sites %>%
group_by(Polygon_id) %>%
summarise(Hotspot_size = mean(Area_ha),
species_richness = mean(species_richness)) %>%
ggplot(., aes(x=species_richness, y=log(Hotspot_size))) +
geom_point()
Final_study_sites %>%
group_by(Polygon_id) %>%
summarise(Hotspot_size = mean(Area_ha),
species_richness = mean(species_richness)) %>%
ggplot(., aes(x=species_richness, y=log(Hotspot_size))) +
geom_point()+
theme(minimal)
Final_study_sites %>%
group_by(Polygon_id) %>%
summarise(Hotspot_size = mean(Area_ha),
species_richness = mean(species_richness)) %>%
ggplot(., aes(x=species_richness, y=log(Hotspot_size))) +
geom_point()+
theme_minimal()
Final_study_sites %>%
group_by(Polygon_id) %>%
summarise(Hotspot_size = mean(Area_ha),
species_richness = mean(species_richness)) %>%
ggplot(., aes(x=species_richness, y=log(Hotspot_size))) +
geom_point()+
theme_excel()
Final_study_sites %>%
group_by(Polygon_id) %>%
summarise(Hotspot_size = mean(Area_ha),
species_richness = mean(species_richness)) %>%
ggplot(., aes(x=species_richness, y=log(Hotspot_size))) +
geom_point()+
theme_bw()
View(Final_study_sites)
table(Final_study_sites$Country)
table(Final_study_sites$Urban_area)
length(unique(Final_study_sites$Urban_area))
Final_study_sites %>%
group_by(Polygon_id) %>%
summarise(Hotspot_size = mean(Area_ha),
species_richness = mean(species_richness)) %>%
ggplot(., aes(x=species_richness, y=(Hotspot_size))) +
geom_point()+
theme_bw()
